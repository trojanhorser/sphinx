

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CRUD Functions &mdash; Advantum Technical Documentation 1.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Advantum Technical Documentation 1.1 documentation" href="index.html"/>
        <link rel="up" title="Advantum Web Software Development Framework" href="advantumframework.html"/>
        <link rel="next" title="Alerts/Notifications" href="alerts.html"/>
        <link rel="prev" title="String Functions" href="stringfunctions.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Advantum Technical Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="advantumframework.html">Advantum Web Software Development Framework</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="advantumframework.html#overview">Overview</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="datadictionary.html">Data Dictionary</a></li>
<li class="toctree-l3"><a class="reference internal" href="fields.html">Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="fields.html#date-fields">Date Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="fields.html#time-fields">Time Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="buttons.html">Buttons</a></li>
<li class="toctree-l3"><a class="reference internal" href="forms.html">Forms</a></li>
<li class="toctree-l3"><a class="reference internal" href="forms.html#other-form-methods">Other Form Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="stringfunctions.html">String Functions</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">CRUD Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sqlselect-sql-text-dataobject-useconn-sqlphppgm">sqlSelect(sql, text, dataObject, useconn, sqlphppgm)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sqlinsert-table-recordobject-useconn-sqlphppgm">sqlInsert(table,recordObject,useconn,sqlphppgm)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sqlupdate-table-recordobject-updatecriteria-useconn-sqlphppgm">sqlUpdate(table, recordObject, updateCriteria,useconn,sqlphppgm)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sqldelete-table-deletecriteria-useconn-sqlphppgm">sqlDelete(table, deleteCriteria,useconn,sqlphppgm)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sqlupdateobj-element">sqlUpdateObj(element)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sqlvalueof-field">sqlValueOf(field)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="alerts.html">Alerts/Notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="checkboxandradiobuttons.html">Checkbox And Radio Buttons</a></li>
<li class="toctree-l3"><a class="reference internal" href="globalvariable.html">Global Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="time.html">Date and Time Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="table.html">Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">Database Logging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="training.html">Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="standardsandconventions.html">Software Development Standards And Conventions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Advantum Technical Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="advantumframework.html">Advantum Web Software Development Framework</a> &raquo;</li>
      
    <li>CRUD Functions</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/crudfunctions.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="crud-functions">
<h1>CRUD Functions<a class="headerlink" href="#crud-functions" title="Permalink to this headline">¶</a></h1>
<p>CRUD <em>(Create, Read, Update, Delete)</em> are a set of functions used to perform database operations. These functions and how they are used is described below:</p>
<div class="section" id="sqlselect-sql-text-dataobject-useconn-sqlphppgm">
<h2>sqlSelect(sql, text, dataObject, useconn, sqlphppgm)<a class="headerlink" href="#sqlselect-sql-text-dataobject-useconn-sqlphppgm" title="Permalink to this headline">¶</a></h2>
<p>This function is used to retrieve records from a database. It accepts five(5) parameters:</p>
<ol class="arabic simple">
<li>sql - The SQL Select text ( eg. <em>&#8220;select * from customers&#8221;</em> )</li>
<li>text - The variable that data retrieved should be stored in</li>
<li>dataObject - The amount of rows which should be returned.</li>
<li>useconn - Connection object to be used to establish the connection.</li>
<li>sqlphppgm - PHP file which will execute the query.</li>
</ol>
<ul class="simple">
<li>An example is shown below:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">sqlStatement</span><span class="o">=</span><span class="s2">&quot;select bilno, cnsign, &#39;nothing&#39; as n from wsblhead&quot;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sqlSelect</span><span class="p">(</span><span class="nx">sqlStatement</span><span class="p">,</span><span class="s1">&#39;$data&#39;</span><span class="p">,</span><span class="mi">1000</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">sqlerr</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">$data</span><span class="p">.</span><span class="nx">rcdcnt</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;No data found&#39;</span><span class="p">);</span> <span class="k">return</span> <span class="kc">false</span><span class="p">}</span>
</pre></div>
</div>
<p>If an error occurs during the sql transaction the <strong>sqlerr</strong> global variable is set with details of the error.
The <strong>$data.rcdcnt</strong> is also returned as shown in the example above.</p>
</div>
<div class="section" id="sqlinsert-table-recordobject-useconn-sqlphppgm">
<h2>sqlInsert(table,recordObject,useconn,sqlphppgm)<a class="headerlink" href="#sqlinsert-table-recordobject-useconn-sqlphppgm" title="Permalink to this headline">¶</a></h2>
<p>The <strong>sqlInsert</strong> function adds a record to a specific table to the database. it accepts four parameters:</p>
<ol class="arabic simple">
<li>table - The database table that will be modified.</li>
<li>recordObject - The object with the fields that need to be inserted.</li>
<li>useconn - Connection object to be used to establish the connection.</li>
<li>sqlphppgm - PHP file which will execute the query.</li>
</ol>
<p>The example below creates and object using the <strong>sqlUpdateObj</strong> object which extracts fields from <strong>form1</strong> and inserts it into
the <strong>users</strong> table:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">tableName</span> <span class="o">=</span> <span class="s1">&#39;users&#39;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">insertObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">sqlUpdateObj</span><span class="p">(</span><span class="s1">&#39;*form:form1&#39;</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">sqlInsert</span><span class="p">(</span><span class="nx">tableName</span><span class="p">,</span><span class="nx">insertObject</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Record Added.&#39;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">sqlerr</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlupdate-table-recordobject-updatecriteria-useconn-sqlphppgm">
<h2>sqlUpdate(table, recordObject, updateCriteria,useconn,sqlphppgm)<a class="headerlink" href="#sqlupdate-table-recordobject-updatecriteria-useconn-sqlphppgm" title="Permalink to this headline">¶</a></h2>
<p>The <strong>sqlUpdate</strong> function updates records in a table based on a specific criteria. It accepts five parameters:</p>
<ol class="arabic simple">
<li>table - The database table that will be modified.</li>
<li>recordObject - The object with the fields that need to be updated.</li>
<li>updateCriteria - The where criteria for the records which need to be updated.</li>
<li>useconn - Connection object to be used to establish the connection.</li>
<li>sqlphppgm - PHP file which will execute the query.</li>
</ol>
<p>The example below updates the changed fields of a record in the <strong>container</strong> table.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">updateObject</span> <span class="o">=</span> <span class="nx">saveddata</span><span class="p">.</span><span class="nx">returnChangedVar</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">tableName</span> <span class="o">=</span> <span class="s2">&quot;container&quot;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">whereCriteria</span><span class="o">=</span><span class="s2">&quot;containercode=500&quot;</span><span class="p">;</span>

<span class="k">if</span><span class="p">(</span> <span class="nx">sqlUpdate</span><span class="p">(</span><span class="nx">tableName</span><span class="p">,</span><span class="nx">updateObject</span><span class="p">,</span><span class="nx">whereCriteria</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Record Updated.&#39;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">sqlerr</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sqldelete-table-deletecriteria-useconn-sqlphppgm">
<h2>sqlDelete(table, deleteCriteria,useconn,sqlphppgm)<a class="headerlink" href="#sqldelete-table-deletecriteria-useconn-sqlphppgm" title="Permalink to this headline">¶</a></h2>
<p>This removes records from a database table based on a specific criteria.</p>
<ol class="arabic simple">
<li>table - The database table that will be modified.</li>
<li>deleteCriteria - The where criteria for the records which need to be deleted.</li>
<li>useconn - onnection object to be used to establish the connection.</li>
<li>sqlphppgm - PHP file which will execute the query.</li>
</ol>
<p>The example below deletes a record in the <strong>user</strong> table based on the criteria specified:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">tableName</span> <span class="o">=</span> <span class="s2">&quot;user&quot;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">whereCriteria</span> <span class="o">=</span> <span class="s2">&quot;username=john&quot;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sqlDelete</span><span class="p">(</span><span class="nx">tableName</span><span class="p">,</span> <span class="nx">whereCriteria</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">sqlerr</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All CRUD functions update the &#8220;sqlerr&#8221; global variable when if fails. This variable can be accessed and displayed to view the nature of the issue.
Also if the useconn parameter is not passed it will use the default connection which is in the <strong>conn</strong> global variable.</p>
</div>
</div>
<div class="section" id="sqlupdateobj-element">
<h2>sqlUpdateObj(element)<a class="headerlink" href="#sqlupdateobj-element" title="Permalink to this headline">¶</a></h2>
<p>The <strong>sqlUpdateObj</strong> is used to automatically generate an object from fields. The field name becomes the <strong>property</strong>
of the object and the field value becomes the value of the <strong>property</strong>.</p>
<ul class="simple">
<li>The example below shows how the create an <strong>sqlUpdateObj</strong> from individual fields <strong>(fieldOne, fieldTwo)</strong>:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">fieldObject</span> <span class="o">=</span> <span class="nx">sqlUpdateObj</span><span class="p">(</span><span class="s1">&#39;fieldOne&#39;</span><span class="p">,</span><span class="nx">fieldTwo</span><span class="p">)</span>

<span class="cm">/*</span>
<span class="cm">        The value of the fieldObject is below:</span>

<span class="cm">        fieldObject{</span>
<span class="cm">                fieldOne:&quot;value1&quot;,</span>
<span class="cm">                fieldTwo:&quot;value2&quot;,</span>
<span class="cm">        }</span>
<span class="cm">*/</span>
</pre></div>
</div>
<ul class="simple">
<li>The example below shows how the create an <strong>sqlUpdateObj</strong> from a form:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">fieldObject</span> <span class="o">=</span> <span class="nx">sqlUpdateObj</span><span class="p">(</span><span class="s1">&#39;*form:form1&#39;</span><span class="p">)</span>

<span class="cm">/*</span>
<span class="cm">        The value of the fieldObject is below:</span>

<span class="cm">        fieldObject{</span>
<span class="cm">                fieldOne:&quot;value1&quot;,</span>
<span class="cm">                fieldTwo:&quot;value2&quot;,</span>
<span class="cm">                fieldThree:&quot;value3&quot;</span>
<span class="cm">                ...</span>
<span class="cm">                ..</span>
<span class="cm">                .</span>
<span class="cm">        }</span>
<span class="cm">*/</span>
</pre></div>
</div>
<ul class="simple">
<li>A full example of how the <strong>sqlUpdateObj</strong> is used to save all the fields on a form is shown below:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">updobj</span><span class="o">=</span><span class="k">new</span> <span class="nx">sqlUpdateObj</span><span class="p">(</span><span class="s1">&#39;*form:form1&#39;</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">sqlInsert</span><span class="p">(</span><span class="s1">&#39;wsconsgn&#39;</span><span class="p">,</span><span class="nx">updobj</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Record Added.&#39;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">alert</span><span class="p">(</span><span class="nx">sqlerr</span><span class="p">);</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlvalueof-field">
<h2>sqlValueOf(field)<a class="headerlink" href="#sqlvalueof-field" title="Permalink to this headline">¶</a></h2>
<p>The <strong>sqlValueOf</strong> function formats a field in valid SQL format. For numeric fields the value is not modified.</p>
<ul class="simple">
<li>An example of how it parses a text field which has a value of <strong>&#8220;testing&#8221;</strong> is shown below:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span>  <span class="nx">result</span> <span class="o">=</span> <span class="nx">sqlValueOf</span><span class="p">(</span><span class="s1">&#39;textField&#39;</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm">        The value of result is &#39;testing&#39; which is a string value with single quites.</span>
<span class="cm">*/</span>
</pre></div>
</div>
<ul class="simple">
<li>An example of how it parses a numeric field which has a value of <strong>100</strong> is shown below:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span>  <span class="nx">result</span> <span class="o">=</span> <span class="nx">sqlValueOf</span><span class="p">(</span><span class="s1">&#39;numericField&#39;</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm">        The value of result is 100 which is numeric.</span>
<span class="cm">*/</span>
</pre></div>
</div>
<ul class="simple">
<li>An example of how it parses a date field which has a value of <strong>2015/09/11</strong> is shown below:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span>  <span class="nx">result</span> <span class="o">=</span> <span class="nx">sqlValueOf</span><span class="p">(</span><span class="s1">&#39;dateField&#39;</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm">        The value of result is 20150911 which is numeric .</span>
<span class="cm">*/</span>
</pre></div>
</div>
<ul class="simple">
<li>An example of how it parses a time field which has a value of <strong>11:00</strong> is shown below:</li>
</ul>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span>  <span class="nx">result</span> <span class="o">=</span> <span class="nx">sqlValueOf</span><span class="p">(</span><span class="s1">&#39;timeField&#39;</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm">        The value of result is 1100 which is numeric .</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="alerts.html" class="btn btn-neutral float-right" title="Alerts/Notifications" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="stringfunctions.html" class="btn btn-neutral" title="String Functions" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Denis Bell.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>